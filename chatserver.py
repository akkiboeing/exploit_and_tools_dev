import socket
import sys

sock= socket.socket(socket.AF_INET, socket.SOCK_STREAM)
server_address = ('localhost',8435)
print >>sys.stderr,'Starting up server on "%s" port %s' %server_address

sock.bind(server_address)
sock.listen(1)

print>>sys.stderr,'Waiting for Connection'
connection, client_address = sock.accept()
print>>sys.stderr,'Client connected. Client is online'
 
while True:
      data = connection.recv(64)
      if(data!=" "):
         print>>sys.stderr,'Client: "%s"'%data
      if(data=="bye"):
         print>>sys.stderr,'Closing chat....'
         sock.close()
         break
      senddata = raw_input('Server: ')
      connection.sendall(senddata)
      if(senddata=="bye"):
        print>>sys.stderr,'Closing chat....'
        sock.close()
        break
        
connection.close()
